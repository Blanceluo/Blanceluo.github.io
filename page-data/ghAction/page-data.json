{"componentChunkName":"component---src-templates-blog-post-js","path":"/ghAction/","result":{"data":{"site":{"siteMetadata":{"title":"ğŸš€ å¿˜è¨€"}},"markdownRemark":{"id":"75bec23c-2a72-523d-af3f-51b3d6d968b4","excerpt":"å‰è¨€ æœ¬ç¯‡æ–‡ç« ï¼Œæ˜¯ç”±ä½œè€…åœ¨æ­å»ºåšå®¢æ—¶ï¼Œç•¥å¾®æ¶‰åŠ GitHub Actions çš„è‡ªåŠ¨åŒ–æŒç»­é›†æˆéƒ¨ç½²åå†™ä¸‹çš„ã€‚\nå› æ­¤ï¼Œæ‚¨åœ¨é˜…è¯»æ—¶ï¼Œå¯èƒ½ä¼šå‘ç°è¯¸å¤šé”™è¯¯ã€‚å¦‚æœå­˜åœ¨ï¼Œè¯·ä¸ä½œè€…è”ç³»ï¼Œååˆ†æ„Ÿè°¢ã€‚ å…³äºæ›´å¤šï¼Œæ‚¨å¯ä»¥å‚è€ƒ GitHub Actionsâ€¦","html":"<h3>å‰è¨€</h3>\n<p>æœ¬ç¯‡æ–‡ç« ï¼Œæ˜¯ç”±ä½œè€…åœ¨æ­å»ºåšå®¢æ—¶ï¼Œç•¥å¾®æ¶‰åŠ <strong>GitHub Actions</strong> çš„è‡ªåŠ¨åŒ–æŒç»­é›†æˆéƒ¨ç½²åå†™ä¸‹çš„ã€‚\nå› æ­¤ï¼Œæ‚¨åœ¨é˜…è¯»æ—¶ï¼Œå¯èƒ½ä¼šå‘ç°è¯¸å¤šé”™è¯¯ã€‚å¦‚æœå­˜åœ¨ï¼Œè¯·ä¸ä½œè€…è”ç³»ï¼Œååˆ†æ„Ÿè°¢ã€‚</p>\n<p>å…³äºæ›´å¤šï¼Œæ‚¨å¯ä»¥å‚è€ƒ <a href=\"https://docs.github.com/en/free-pro-team@latest/actions\"><strong>GitHub Actions</strong></a> æ–‡æ¡£ã€‚</p>\n<p>æ­¤æ–‡ç« é¢å‘çš„æ˜¯å‡å®šæœ‰ä¸€å®šè®¡ç®—æœºåŸºç¡€ï¼Œäº†è§£æŸç§æˆ–å¤šç§è®¡ç®—æœºè¯­è¨€ï¼Œç”šè‡³æŒæ¡ä¸€äº›æœåŠ¡ç«¯ç¯å¢ƒé…ç½®ç»éªŒçš„äººç¾¤ã€‚</p>\n<h3>ä»€ä¹ˆæ˜¯ <a href=\"https://docs.github.com/cn/free-pro-team@latest/actions/guides/about-continuous-integration#%E5%85%B3%E4%BA%8E%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90\">è‡ªåŠ¨åŒ–æŒç»­é›†æˆ</a></h3>\n<p>ä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨å¼€å‘é˜¶æ®µç»“æŸåï¼Œè¿›å…¥æµ‹è¯•é˜¶æ®µæ—¶ã€‚\nä¸€èˆ¬éƒ½ä¼šé¢‘ç¹çš„è¿›è¡Œç¼–è¯‘æ‰“åŒ…ï¼Œå°†é¡¹ç›®æ–‡ä»¶æŒç»­åœ°å‘å¸ƒæ›´æ–°åˆ°æµ‹è¯•ç¯å¢ƒä¸­å»ç­‰æ“ä½œã€‚\nç±»ä¼¼äºè¿™ç§é‡å¤æ€§è´¨è¾ƒé«˜çš„å·¥ä½œï¼Œäººæ˜¯æƒ…ç»ªåŒ–çš„åŠ¨ç‰©ï¼Œè¶…è¿‡ä¸€å®šçš„æ¬¡æ•°éš¾å…æƒ¹äººç„¦èºã€‚æƒ…ç»ªç”Ÿå˜ï¼Œå·¥ä½œä¾¿å®¹æ˜“å‡ºé”™ã€‚</p>\n<p>å› æ­¤ï¼Œè‹¥å°†è¿™ç±»æ€§è´¨çš„å·¥ä½œï¼Œäº¤ç”±æŸäº›æœåŠ¡æˆ–å·¥å…·æ‰§è¡Œã€‚è€Œå¼€å‘äººå‘˜åªéœ€ç¼–è¾‘ä¸€äº›ç›¸åº”çš„æ–‡ä»¶é…ç½®ã€‚å¦‚æ­¤è¿™èˆ¬ï¼Œä¸ä»…ç®€åŒ–äº†æ“ä½œæµç¨‹ï¼Œå¯¹å¼€å‘äººå‘˜çš„ä½“éªŒæ›´åŠ å‹å¥½ã€‚åŒæ—¶ä¹Ÿå¤§å¤§é™ä½äº†å‡ºé”™å‡ ç‡ï¼Œå·¥ä½œè´¨é‡ä¹Ÿèƒ½å¾—åˆ°ä¸€å®šçš„ä¿è¯ã€‚</p>\n<p>å½“æŸä¸ªéœ€æ±‚ç—›ç‚¹çš„å‡ºç°ï¼Œå®šä¼šå‚¬ç”Ÿå‡ºç›¸åº”çš„è§£å†³é€”å¾„ã€‚åŸºäºæ­¤ï¼Œä¸šç•Œæ—©å·²æ¨å‡ºäº†ä¸€äº›æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚ å¦‚ Jenkins, Travis CI, Netlify, GitHub Actionsâ€¦</p>\n<h3>å®ƒä¸ºä½œè€…å¸¦æ¥äº†ä»€ä¹ˆ</h3>\n<p>ä½œè€…åœ¨æ­å»ºä¸ªäººåšå®¢æ—¶ï¼Œå¯¹æ¯”äº†ä¸€äº›å¸¸è§çš„åšå®¢æ¡†æ¶ã€‚\nHexoï¼ŒHugoï¼ŒVuePress ä¹ƒè‡³äºä½œè€…æœ€ç»ˆé€‰æ‹©çš„ Gatsbyã€‚å¯¹äºä¸€ç¯‡åšæ–‡çš„ç¼–è¾‘ï¼Œå‘å¸ƒéƒ½éœ€è¦ç»å†ä»¥ä¸‹å‡ ä¸ªæµç¨‹ã€‚</p>\n<blockquote>\n<p>æ–°å»ºåšæ–‡ â€”> ç¼–è¯‘æ‰“åŒ…æºç  â€”> å‘å¸ƒä¸Šçº¿</p>\n</blockquote>\n<p>ä¹…è€Œä¹…ä¹‹ï¼Œä¸èƒœå…¶çƒ¦ã€‚èº«ä¸ºä¸€ä½è®¡ç®—æœºè¡Œä¸šç¼–ç äººå‘˜ï¼Œå·²æ·±è°™å°è£…å¤ç”¨ä¹‹ä¾¿åˆ©ï¼Œå¦‚ä½•èƒ½å¤Ÿå—å¾—äº†è¿™èˆ¬çš„é‡å¤ç¹çã€‚åŠ ä¹‹ä½œè€…åšå®¢æºç æ‰˜ç®¡åœ¨ GitHub ä¸Šï¼Œè‡ªç„¶é€‰æ‹© GitHub Actionsã€‚</p>\n<p><strong>æ­¤ä¸ºä½œè€…çš„é…ç½®æ–‡ä»¶ï¼Œæ•æ„Ÿå¤„å·²éšå»ã€‚ç‰¹åŠ å…¥ä¸­æ–‡æ³¨é‡Šè¯´æ˜ã€‚</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\"># GitHub Actions é…ç½®æ–‡ä»¶ä»¥ YML ç¼–å†™ã€‚</span>\n\n<span class=\"token comment\"># å·¥ä½œæµç¨‹åç§° å¯é€‰ã€‚è‹¥è®¾ç½®ï¼Œå°†ä¼šå‡ºç°åœ¨ä»“åº“çš„ Actions ä¸‹æ‹‰é€‰é¡¹å¡ä¸­ã€‚</span>\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Gatsby Publish\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># æŒ‡å®šè§¦å‘å·¥ä½œæµç¨‹æ–‡ä»¶çš„äº‹ä»¶ï¼Œæ­¤å¤„ä¸º push äº‹ä»¶ã€‚</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># æŒ‡å®šè§¦å‘å·¥ä½œæµç¨‹æ–‡ä»¶çš„åˆ†æ”¯ï¼Œæ­¤å¤„ä¸º master åˆ†æ”¯ã€‚</span>\n      <span class=\"token punctuation\">-</span> master\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># ä¸€ç³»åˆ—ä½œä¸šçš„ç»„åˆ</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># build ä½œä¸š</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest <span class=\"token comment\"># æ‰§è¡Œä½œä¸šçš„è™šæ‹Ÿç¯å¢ƒ</span>\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># ä½œä¸šä¸­çš„æ‰€æœ‰æ­¥éª¤</span>\n      <span class=\"token comment\"># uses å…³é”®å­—å°†ä¼šä½¿ç”¨ç¤¾åŒºä¸­å·²å°è£…å¥½çš„æ“ä½œ</span>\n\n      <span class=\"token comment\"># è¯¥æ“ä½œå°†ä¼šæ£€å‡ºä»“åº“ä¸”å°†å…¶ä¸‹è½½åˆ°è¿è¡Œç¯å¢ƒä¸­</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v1\n      <span class=\"token comment\"># è¯¥æ“ä½œå°†ä¼šåœ¨è¿è¡Œç¯å¢ƒä¸­å®‰è£… Node è½¯ä»¶åŒ…ã€‚ç”¨ä»¥ä¸‹æ–¹æ‰§è¡Œ NPM å‘½ä»¤</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v1\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"12.x\"</span> <span class=\"token comment\"># æŒ‡å®š Node ç‰ˆæœ¬</span>\n\n      <span class=\"token comment\"># run å…³é”®å­—å°†ä¼šåœ¨è¿è¡Œç¯å¢ƒä¸­æ‰§è¡Œç‰¹å®šå‘½ä»¤</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm i  <span class=\"token comment\"># æ‰§è¡Œ npm iï¼Œå®‰è£…ä¾èµ–</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build <span class=\"token comment\"># æ‰§è¡Œæ‰“åŒ…ç¼–è¯‘</span>\n\n      <span class=\"token comment\"># è¯¥æ“ä½œä¼šå°†ç‰¹å®šç›®å½•ä¸‹çš„æ–‡ä»¶ push åˆ°æŒ‡å®šä»“åº“çš„æŒ‡å®šåˆ†æ”¯</span>\n      <span class=\"token comment\"># ä½œè€…è¿™é‡Œåˆ›å»ºäº†å¦å¤–ä¸€ä¸ªä»“åº“å­˜å‚¨ç¼–è¯‘åçš„é¡¹ç›®æ–‡ä»¶</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages@v2.5.1\n        <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n          <span class=\"token comment\"># secrets.ACCESS_TOKEN</span>\n          <span class=\"token comment\"># åŠ å¯†ç¯å¢ƒå˜é‡ï¼Œç”¨ä»¥è™šæ‹Ÿç¯å¢ƒä¸‹è®¿é—®ä½œè€…ä»“åº“</span>\n          <span class=\"token key atrule\">ACTIONS_DEPLOY_KEY</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">EXTERNAL_REPOSITORY</span><span class=\"token punctuation\">:</span> REPOSITORY <span class=\"token comment\"># æŒ‡å®šè¢« push çš„ä»“åº“å</span>\n          <span class=\"token key atrule\">PUBLISH_BRANCH</span><span class=\"token punctuation\">:</span> master <span class=\"token comment\"># æŒ‡å®šè¢« push çš„åˆ†æ”¯</span>\n          <span class=\"token key atrule\">PUBLISH_DIR</span><span class=\"token punctuation\">:</span> ./public <span class=\"token comment\"># æŒ‡å®šå°†è¦ push çš„ç›®å½•</span></code></pre></div>\n<p>åˆ°è¿™é‡Œï¼Œåªæ˜¯å®ç°äº† è‡ªåŠ¨ <strong>æ‰“åŒ…ç¼–è¯‘æºç </strong> çš„æ­¥éª¤ã€‚è¿˜å‰©ä¸‹å°†ç¼–è¯‘åçš„æ–‡ä»¶è‡ªåŠ¨å‘å¸ƒåˆ°çº¿ä¸ŠæœåŠ¡å™¨ã€‚</p>\n<p>å…¶å®ï¼Œè¿™æœ€åä¸€æ­¥ï¼Œæ— éä¾¿æ˜¯å®ç° <strong>çº¿ä¸ŠæœåŠ¡å™¨ç‰¹å®šç›®å½•èƒ½å¤Ÿåœ¨æ‰€å¯¹åº”çš„è¿œç¨‹ä»“åº“æ–‡ä»¶å‘ç”Ÿå˜æ›´åè‡ªåŠ¨æ‹‰å–åˆ°æœ¬åœ°</strong>ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ© <a href=\"https://docs.github.com/en/free-pro-team@latest/github/extending-github/about-webhooks\">GitHub webhooks</a> å®ç°.</p>\n<h3>GitHub webhooks</h3>\n<p>åªè¦åœ¨ä»“åº“æˆ–ç»„ç»‡ä¸Šæ‰§è¡Œç‰¹å®šçš„æ“ä½œï¼Œä¾¿å¯è§¦å‘ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥é…ç½® webhooks åœ¨ä»¥ä¸‹æƒ…å†µä¸‹æ‰§è¡Œï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. æ¨é€åˆ°ä»“åº“\n2. æ‰“å¼€ pull request\n3. æ„å»º GitHub Pages é¡µé¢\n4. æ·»åŠ æ–°æˆå‘˜åˆ°å›¢é˜Ÿ</code></pre></div>\n<p>æ‰€ä»¥æˆ‘ä»¬è‡ªåŠ¨éƒ¨ç½²çš„å®ç°æ­¥éª¤ä¸»è¦æ˜¯ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. æ¨é€åˆ°ä»“åº“ (å·²å®ç°)\n2. è§¦å‘ Hooksï¼Œå‘é€æŒ‡å®šè¯·æ±‚åˆ°æœåŠ¡å™¨\n3. æœåŠ¡å™¨æ¥æ”¶åˆ°æŒ‡å®šè¯·æ±‚ï¼Œæ‰§è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬\n4. è‡ªåŠ¨éƒ¨ç½²è„šæœ¬æ‰§è¡Œä»£ç æ‹‰å–ï¼Œç§»åŠ¨æ–‡ä»¶ç­‰å®Œæˆç½‘ç«™æ›´æ–°éƒ¨ç½²çš„æ“ä½œã€‚</code></pre></div>\n<h4>1. è®¾ç½® WebHooks</h4>\n<p><img src=\"https://cdn.jsdelivr.net/gh/seewhite/cdns/imgs/hooks.png\" alt=\"è®¾ç½® WebHooks\"></p>\n<h4>2. ç¼–å†™æœåŠ¡è„šæœ¬</h4>\n<p>ä½œè€…åœ¨è¿™é‡Œä½¿ç”¨ Node ç¼–å†™ï¼Œå½“ç„¶ï¼Œä½¿ç”¨ä»»æ„ä¸€ç§æœåŠ¡ç«¯è¯­è¨€çš†å¯ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// server.js</span>\n\n<span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> createHandler <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'github-webhook-handler'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// secret ä¸ GitHub Hooks åå°è®¾ç½®ä¿æŒä¸€è‡´</span>\n<span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> <span class=\"token function\">createHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> secret<span class=\"token operator\">:</span> <span class=\"token string\">'xxx'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">run_cmd</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cmd<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> spawn <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'child_process'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>spawn<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> <span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>cmd<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> resp <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n  child<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">buffer</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> resp <span class=\"token operator\">+=</span> buffer<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  child<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token function\">callback</span> <span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nhttp<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> <span class=\"token number\">404</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">'no such location'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">7000</span><span class=\"token punctuation\">)</span>\n\nhandler<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error:'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nhandler<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'push'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Received a push event for %s to %s'</span><span class=\"token punctuation\">,</span>\n    event<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">.</span>repository<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>\n    event<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">.</span>ref<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// æ‰§è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬</span>\n    <span class=\"token function\">run_cmd</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sh'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./deploy.sh'</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">.</span>repository<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">text</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>3. ç¼–å†™ shell è„šæœ¬</h4>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token comment\"># ç½‘ç«™çš„æ ¹ç›®å½•</span>\n<span class=\"token assign-left variable\">WEB_PATH</span><span class=\"token operator\">=</span><span class=\"token string\">'xxx'</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"start deployment\"</span>\n<span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$WEB_PATH</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"fetching from remote...\"</span>\n\n<span class=\"token comment\"># ä¸ºäº†é¿å…å†²çªï¼Œå¼ºåˆ¶æ›´æ–°æœ¬åœ°æ–‡ä»¶</span>\n<span class=\"token function\">git</span> fetch --all\n<span class=\"token function\">git</span> reset --hard origin/master</code></pre></div>\n<p>å¤§ä½“ç»†èŠ‚å¦‚æ­¤ï¼Œå½“ç„¶å®é™…è¿˜è¦è§†å„è‡ªçš„é¡¹ç›®ç»†èŠ‚è€Œè®ºã€‚\nä½†ä¸è®ºå¦‚ä½•å˜åŒ–ï¼Œæœ¬è´¨å§‹ç»ˆä¸ä¼šæœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</p>","frontmatter":{"title":"GitHub Actions æŒç»­é›†æˆéƒ¨ç½²","time":"2020|11|08","date":"December 08, 2020","description":"è§£æ”¾åŒæ‰‹ï¼Œæé«˜èµ„æ–™ç”Ÿäº§æ•ˆç‡ã€‚ğŸ˜„"}},"previous":{"fields":{"slug":"/date/"},"frontmatter":{"title":"Date"}},"next":{"fields":{"slug":"/performance/"},"frontmatter":{"title":"Antd Design æ ·å¼æ–‡ä»¶å¼•å…¥ä¼˜åŒ–"}}},"pageContext":{"id":"75bec23c-2a72-523d-af3f-51b3d6d968b4","previousPostId":"8c23956c-a6ed-506e-b693-524af09deddd","nextPostId":"27bb4b63-8d0b-53f0-a63a-c3559619318f"}},"staticQueryHashes":["2841359383","2932667297"]}